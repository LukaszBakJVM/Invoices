Index: src/main/java/org/lukasz/faktury/invoices/InvoicesService.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package org.lukasz.faktury.invoices;\r\n\r\nimport org.lukasz.faktury.invoices.dto.CalculatePaymentDate;\r\nimport org.lukasz.faktury.invoices.dto.InvoicesDtoRequest;\r\nimport org.lukasz.faktury.invoices.dto.InvoicesNumber;\r\n\r\nimport java.time.LocalDate;\r\nimport java.util.List;\r\n\r\npublic interface InvoicesService {\r\n    void createInvoices(InvoicesDtoRequest request,String email);\r\n    List<String> paymentsMethod();\r\n\r\n    InvoicesNumber invoicesNumber(String email);\r\n\r\n    CalculatePaymentDate calculatePaymentDate(LocalDate dateOfIssue, int postponement);\r\n\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/lukasz/faktury/invoices/InvoicesService.java b/src/main/java/org/lukasz/faktury/invoices/InvoicesService.java
--- a/src/main/java/org/lukasz/faktury/invoices/InvoicesService.java	
+++ b/src/main/java/org/lukasz/faktury/invoices/InvoicesService.java	
@@ -3,13 +3,14 @@
 import org.lukasz.faktury.invoices.dto.CalculatePaymentDate;
 import org.lukasz.faktury.invoices.dto.InvoicesDtoRequest;
 import org.lukasz.faktury.invoices.dto.InvoicesNumber;
+import org.lukasz.faktury.invoices.dto.PaymentsMethod;
 
 import java.time.LocalDate;
 import java.util.List;
 
 public interface InvoicesService {
     void createInvoices(InvoicesDtoRequest request,String email);
-    List<String> paymentsMethod();
+    PaymentsMethod paymentsMethod();
 
     InvoicesNumber invoicesNumber(String email);
 
Index: src/main/java/org/lukasz/faktury/invoices/InvoicesServiceImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package org.lukasz.faktury.invoices;\r\n\r\nimport jakarta.transaction.Transactional;\r\nimport org.lukasz.faktury.buyer.BuyerService;\r\nimport org.lukasz.faktury.enums.Payment;\r\nimport org.lukasz.faktury.exceptions.AccountNumberException;\r\nimport org.lukasz.faktury.exceptions.NipConflictException;\r\nimport org.lukasz.faktury.invoices.dto.CalculatePaymentDate;\r\nimport org.lukasz.faktury.invoices.dto.InvoicesDtoRequest;\r\nimport org.lukasz.faktury.invoices.dto.InvoicesNumber;\r\nimport org.lukasz.faktury.items.InvoiceItemsService;\r\nimport org.lukasz.faktury.seller.Seller;\r\nimport org.lukasz.faktury.seller.SellerService;\r\nimport org.lukasz.faktury.utils.validation.Validation;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport java.time.LocalDate;\r\nimport java.time.LocalDateTime;\r\nimport java.time.LocalTime;\r\nimport java.util.Arrays;\r\nimport java.util.Comparator;\r\nimport java.util.List;\r\nimport java.util.Optional;\r\n\r\n@Service\r\npublic class InvoicesServiceImpl implements InvoicesService{\r\n    private final InvoicesRepo repo;\r\n    private final InvoicesMapper mapper;\r\n    private final BuyerService buyerService;\r\n    private final SellerService sellerService;\r\n    private final InvoiceItemsService invoiceItemsService;\r\n\r\n    private final Validation validation;\r\n    private final StringBuilder str;\r\n    private final LocalDate today = LocalDate.now();\r\n\r\n    LocalDate start = today.withDayOfMonth(1);\r\n    LocalDate end = today.withDayOfMonth(today.lengthOfMonth());\r\n\r\n\r\n    public InvoicesServiceImpl(InvoicesRepo repo, InvoicesMapper mapper, Validation validation, StringBuilder str, SellerService sellerService, BuyerService buyerService, InvoiceItemsService invoiceItemsService) {\r\n        this.repo = repo;\r\n        this.mapper = mapper;\r\n        this.validation = validation;\r\n        this.str = str;\r\n\r\n        this.buyerService = buyerService;\r\n        this.sellerService = sellerService;\r\n        this.invoiceItemsService = invoiceItemsService;\r\n    }\r\n\r\n    @Override\r\n    @Transactional\r\n    public void createInvoices(InvoicesDtoRequest request,String email) {\r\n        LocalDateTime now = LocalDateTime.now();\r\n        Seller seller = sellerService.findByEmail(email);\r\n        if (seller.getNip().equals(request.buyerDto().nip())) {\r\n            throw new NipConflictException(\"Podano ten sam NIP dla sprzedawcy i nabywcy\");\r\n        }\r\n\r\n\r\n        validation.validation(request);\r\n\r\n        Invoices invoices = mapper.ToEntity(request.invoicesDto(), now);\r\n\r\n        if (seller.getAccountNb() == null && !request.invoicesDto().typOfPayment().equals(\"Gotówka\")) {\r\n            throw new AccountNumberException(\"Uzupełnij nr konta\");\r\n        }\r\n\r\n\r\n        invoices.setBuyer(buyerService.findBuyer(request.buyerDto()));\r\n        invoices.setSeller(seller);\r\n\r\n\r\n        Invoices save = repo.save(invoices);\r\n\r\n        invoiceItemsService.saveItems(request.invoiceItemsDtos(), save);\r\n\r\n\r\n    }\r\n\r\n    @Override\r\n    public List<String> paymentsMethod() {\r\n        return Arrays.stream(Payment.values()).map(Payment::getPAYMENT_TYPE).toList();\r\n    }\r\n    @Override\r\n    public InvoicesNumber invoicesNumber(String email) {\r\n\r\n\r\n\r\n        List<Invoices> listNumberList = repo.findAllBySeller_User_EmailAndGeneratedDateOfIssueBetween(email, start.atStartOfDay(), end.atTime(LocalTime.MAX));\r\n\r\n\r\n\r\n        return calculateNumberOfInvoices(listNumberList);\r\n\r\n    }\r\n\r\n    @Override\r\n    public CalculatePaymentDate calculatePaymentDate(LocalDate dateOfIssue, int postponement) {\r\n        return new CalculatePaymentDate(dateOfIssue.plusDays(postponement));\r\n    }\r\n\r\n\r\n    private InvoicesNumber calculateNumberOfInvoices(List<Invoices> invoicesNb) {\r\n        str.setLength(0);\r\n        String date = today.toString();\r\n\r\n\r\n        List<String> list = Arrays.stream(date.split(\"-\")).toList();\r\n\r\n        String initNumber = \"FV/\";\r\n        if (invoicesNb.isEmpty()) {\r\n            return new InvoicesNumber(str.append(initNumber).append(\"1\").append(\"/\").append(list.get(1)).append(\"/\").append(list.get(0)).toString());\r\n        }\r\n\r\n        Optional<Invoices> first = invoicesNb.stream().sorted(Comparator.comparing(Invoices::getGeneratedDateOfIssue).reversed()).findFirst();\r\n        Invoices invoices = first.get();\r\n\r\n        List<String> incrementNumber = Arrays.stream(invoices.getNumber().split(\"/\")).toList();\r\n        String actualNb = incrementNumber.get(1);\r\n        int increment = increment(actualNb);\r\n\r\n        return new InvoicesNumber(str.append(initNumber).append(increment).append(\"/\").append(list.get(1)).append(\"/\").append(list.get(0)).toString());\r\n    }\r\n\r\n    private int increment(String number) {\r\n        int nb = Integer.parseInt(number);\r\n        nb++;\r\n        return nb;\r\n    }\r\n\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/lukasz/faktury/invoices/InvoicesServiceImpl.java b/src/main/java/org/lukasz/faktury/invoices/InvoicesServiceImpl.java
--- a/src/main/java/org/lukasz/faktury/invoices/InvoicesServiceImpl.java	
+++ b/src/main/java/org/lukasz/faktury/invoices/InvoicesServiceImpl.java	
@@ -8,6 +8,7 @@
 import org.lukasz.faktury.invoices.dto.CalculatePaymentDate;
 import org.lukasz.faktury.invoices.dto.InvoicesDtoRequest;
 import org.lukasz.faktury.invoices.dto.InvoicesNumber;
+import org.lukasz.faktury.invoices.dto.PaymentsMethod;
 import org.lukasz.faktury.items.InvoiceItemsService;
 import org.lukasz.faktury.seller.Seller;
 import org.lukasz.faktury.seller.SellerService;
@@ -80,8 +81,9 @@
     }
 
     @Override
-    public List<String> paymentsMethod() {
-        return Arrays.stream(Payment.values()).map(Payment::getPAYMENT_TYPE).toList();
+    public PaymentsMethod paymentsMethod() {
+        List<String> list = Arrays.stream(Payment.values()).map(Payment::getPAYMENT_TYPE).toList();
+        return new PaymentsMethod(list);
     }
     @Override
     public InvoicesNumber invoicesNumber(String email) {
Index: src/main/java/org/lukasz/faktury/items/InvoiceItemsController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package org.lukasz.faktury.items;\r\n\r\nimport org.lukasz.faktury.items.dto.BruttoToNetto;\r\nimport org.lukasz.faktury.items.dto.CalculateTotalValue;\r\nimport org.lukasz.faktury.items.dto.NettoToBrutto;\r\nimport org.lukasz.faktury.items.dto.ReduceTotalValues;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RequestParam;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport java.math.BigDecimal;\r\nimport java.util.List;\r\n\r\n@RestController\r\n@RequestMapping(\"invoiceItems\")\r\npublic class InvoiceItemsController {\r\n    private final InvoiceItemsService service;\r\n\r\n    public InvoiceItemsController(InvoiceItemsService service) {\r\n        this.service = service;\r\n    }\r\n    @GetMapping(\"/tax\")\r\n    ResponseEntity<List<String>>tax(){\r\n        return ResponseEntity.ok(service.tax());\r\n    }\r\n    @GetMapping(\"/unit\")\r\n    ResponseEntity<List<String>>unit(){\r\n        return ResponseEntity.ok(service.unit());\r\n    }\r\n    @GetMapping(\"/nettoToBrutto\")\r\n    ResponseEntity<NettoToBrutto>nettoToBrutto(@RequestParam BigDecimal priceNetto , @RequestParam String tax){\r\n        return ResponseEntity.ok(service.nettoToBrutto(priceNetto,tax));\r\n    }\r\n    @GetMapping(\"/bruttoToNetto\")\r\n    ResponseEntity<BruttoToNetto>bruttoToNetto(@RequestParam BigDecimal priceNetto , @RequestParam String tax){\r\n        return ResponseEntity.ok(service.bruttoToNetto(priceNetto,tax));\r\n    }\r\n    @GetMapping(\"calculateTotalValue\")\r\n    ResponseEntity<CalculateTotalValue>calculateTotalValue(@RequestParam BigDecimal priceBrutto, @RequestParam int quantity){\r\n        return ResponseEntity.ok(service.calculateTotalValue(priceBrutto, quantity));\r\n    }\r\n    @GetMapping(\"reduceTotalValues\")\r\n    ResponseEntity<ReduceTotalValues>reduceTotalValues(@RequestParam BigDecimal price,@RequestParam int quantity){\r\n        return ResponseEntity.ok(service.reduceTotalValues(price, quantity));\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\n
===================================================================
diff --git a/src/main/java/org/lukasz/faktury/items/InvoiceItemsController.java b/src/main/java/org/lukasz/faktury/items/InvoiceItemsController.java
--- a/src/main/java/org/lukasz/faktury/items/InvoiceItemsController.java	
+++ b/src/main/java/org/lukasz/faktury/items/InvoiceItemsController.java	
@@ -1,9 +1,6 @@
 package org.lukasz.faktury.items;
 
-import org.lukasz.faktury.items.dto.BruttoToNetto;
-import org.lukasz.faktury.items.dto.CalculateTotalValue;
-import org.lukasz.faktury.items.dto.NettoToBrutto;
-import org.lukasz.faktury.items.dto.ReduceTotalValues;
+import org.lukasz.faktury.items.dto.*;
 import org.springframework.http.ResponseEntity;
 import org.springframework.web.bind.annotation.GetMapping;
 import org.springframework.web.bind.annotation.RequestMapping;
@@ -14,7 +11,7 @@
 import java.util.List;
 
 @RestController
-@RequestMapping("invoiceItems")
+@RequestMapping("/invoiceItems")   ///invoiceItems/calculateTotalValue
 public class InvoiceItemsController {
     private final InvoiceItemsService service;
 
@@ -22,11 +19,11 @@
         this.service = service;
     }
     @GetMapping("/tax")
-    ResponseEntity<List<String>>tax(){
+    ResponseEntity<Tax>tax(){
         return ResponseEntity.ok(service.tax());
     }
-    @GetMapping("/unit")
-    ResponseEntity<List<String>>unit(){
+    @GetMapping("/units")
+    ResponseEntity<Units>unit(){
         return ResponseEntity.ok(service.unit());
     }
     @GetMapping("/nettoToBrutto")
Index: src/main/java/org/lukasz/faktury/seller/SellerController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package org.lukasz.faktury.seller;\r\n\r\nimport org.lukasz.faktury.seller.dto.AccountNumber;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.security.core.annotation.AuthenticationPrincipal;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\n@RequestMapping(\"/seller\")\r\npublic class SellerController {\r\n    private final SellerService service;\r\n\r\n    public SellerController(SellerService service) {\r\n        this.service = service;\r\n    }\r\n\r\n    @PostMapping(\"/account\")\r\n    ResponseEntity<String> addAccountNb(@AuthenticationPrincipal UserDetails user, @RequestBody AccountNumber account) {\r\n        service.addAccountNb(account, user.getUsername());\r\n        return ResponseEntity.ok(\"Dodano Konto\");\r\n\r\n\r\n    }\r\n}\r\n
===================================================================
diff --git a/src/main/java/org/lukasz/faktury/seller/SellerController.java b/src/main/java/org/lukasz/faktury/seller/SellerController.java
--- a/src/main/java/org/lukasz/faktury/seller/SellerController.java	
+++ b/src/main/java/org/lukasz/faktury/seller/SellerController.java	
@@ -1,13 +1,11 @@
 package org.lukasz.faktury.seller;
 
 import org.lukasz.faktury.seller.dto.AccountNumber;
+import org.lukasz.faktury.seller.dto.SellerDto;
 import org.springframework.http.ResponseEntity;
 import org.springframework.security.core.annotation.AuthenticationPrincipal;
 import org.springframework.security.core.userdetails.UserDetails;
-import org.springframework.web.bind.annotation.PostMapping;
-import org.springframework.web.bind.annotation.RequestBody;
-import org.springframework.web.bind.annotation.RequestMapping;
-import org.springframework.web.bind.annotation.RestController;
+import org.springframework.web.bind.annotation.*;
 
 @RestController
 @RequestMapping("/seller")
@@ -23,6 +21,10 @@
         service.addAccountNb(account, user.getUsername());
         return ResponseEntity.ok("Dodano Konto");
 
+    }
 
+    @GetMapping()
+    ResponseEntity<SellerDto>findByUserEmail(@AuthenticationPrincipal UserDetails user){
+        return ResponseEntity.ok(service.findByUserEmail(user.getUsername()));
     }
 }
Index: src/main/java/org/lukasz/faktury/invoices/InvoicesController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package org.lukasz.faktury.invoices;\r\n\r\nimport org.lukasz.faktury.invoices.dto.CalculatePaymentDate;\r\nimport org.lukasz.faktury.invoices.dto.InvoicesDtoRequest;\r\nimport org.lukasz.faktury.invoices.dto.InvoicesNumber;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.security.core.annotation.AuthenticationPrincipal;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\nimport java.time.LocalDate;\r\nimport java.util.List;\r\n\r\n@RestController\r\n@RequestMapping(\"/invoices\")\r\npublic class InvoicesController {\r\n\r\n    private final InvoicesService invoicesService;\r\n\r\n    public InvoicesController(InvoicesService invoicesService) {\r\n        this.invoicesService = invoicesService;\r\n    }\r\n\r\n    @PostMapping\r\n    ResponseEntity<Void> createInvoices(@AuthenticationPrincipal UserDetails user, @RequestBody InvoicesDtoRequest request) {\r\n        invoicesService.createInvoices(request, user.getUsername());\r\n        return ResponseEntity.status(HttpStatus.CREATED).build();\r\n    }\r\n\r\n    @GetMapping(\"/paymentsMethod\")\r\n    ResponseEntity<List<String>> paymentsMethod() {\r\n        return ResponseEntity.ok(invoicesService.paymentsMethod());\r\n    }\r\n\r\n    @GetMapping(\"/invoicesNumber\")\r\n    ResponseEntity<InvoicesNumber> invoicesNumber(@AuthenticationPrincipal UserDetails user) {\r\n        return ResponseEntity.ok(invoicesService.invoicesNumber(user.getUsername()));\r\n    }\r\n\r\n    @GetMapping(\"/calculatePaymentDate\")\r\n    ResponseEntity<CalculatePaymentDate> calculatePaymentDateResponse(@RequestParam LocalDate dateOfIssue, @RequestParam int postponement) {\r\n        return ResponseEntity.ok(invoicesService.calculatePaymentDate(dateOfIssue, postponement));\r\n    }\r\n}\r\n
===================================================================
diff --git a/src/main/java/org/lukasz/faktury/invoices/InvoicesController.java b/src/main/java/org/lukasz/faktury/invoices/InvoicesController.java
--- a/src/main/java/org/lukasz/faktury/invoices/InvoicesController.java	
+++ b/src/main/java/org/lukasz/faktury/invoices/InvoicesController.java	
@@ -3,6 +3,7 @@
 import org.lukasz.faktury.invoices.dto.CalculatePaymentDate;
 import org.lukasz.faktury.invoices.dto.InvoicesDtoRequest;
 import org.lukasz.faktury.invoices.dto.InvoicesNumber;
+import org.lukasz.faktury.invoices.dto.PaymentsMethod;
 import org.springframework.http.HttpStatus;
 import org.springframework.http.ResponseEntity;
 import org.springframework.security.core.annotation.AuthenticationPrincipal;
@@ -13,7 +14,7 @@
 import java.util.List;
 
 @RestController
-@RequestMapping("/invoices")
+@RequestMapping("/invoices") // /invoices/invoicesNumber
 public class InvoicesController {
 
     private final InvoicesService invoicesService;
@@ -29,7 +30,7 @@
     }
 
     @GetMapping("/paymentsMethod")
-    ResponseEntity<List<String>> paymentsMethod() {
+    ResponseEntity<PaymentsMethod> paymentsMethod() {
         return ResponseEntity.ok(invoicesService.paymentsMethod());
     }
 
